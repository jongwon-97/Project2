<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/signup/bSignup.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <script src="/js/company.js"></script>
    <title>기업 회원가입</title>
</head>
<body>
<div class="signup-container">
    <h1>기업 회원가입</h1>
    <p class="redirect-link">
        기업 회원가입 페이지입니다.
        <a href="/pSignup" class="personal-link">개인 회원가입으로 가기</a>
    </p>
    <form action="/bSignup" method="post" enctype="multipart/form-data">
        <!-- 사업자 정보 -->
        <fieldset>
            <legend>사업자 정보</legend>
            <div class="form-group">
                <label for="companyNum">사업자 등록번호</label>
                <div class="input-group">
                    <input type="text" id="companyNum" name="companyNum" placeholder="사업자 등록번호를 입력하세요">
                    <button type="button" class="btn-search" onclick="searchBusiness()">검색</button>
                </div>
            </div>
            <div class="error-container">
                <div id="businessValidationResult" class="error-message"></div>
            </div>
        </fieldset>

        <!-- 회사 기본 정보 -->
        <fieldset>
            <legend>회사 기본 정보</legend>
            <div class="form-group">
                <label for="companyName">회사명</label>
                <input type="text" id="companyName" name="companyName" placeholder="회사명을 입력하세요">
            </div>
            <div class="error-container">
                <div id="errorCompanyName" class="error-message"></div>
            </div>
            <div class="form-group">
                <label for="companyEmail">대표 이메일</label>
                <input type="text" id="companyEmail" name="companyEmail" placeholder="대표 이메일을 입력하세요">
            </div>
            <div class="error-container">
                <div id="errorCompanyEmail" class="error-message"></div>
            </div>
            <div class="form-group">
                <label for="companyPhone">대표 전화번호</label>
                <input type="tel" id="companyPhone" name="companyPhone" placeholder="대표 전화번호를 입력하세요">
            </div>
            <div class="error-container">
                <div id="errorCompanyPhone" class="error-message"></div>
            </div>
        </fieldset>

        <!-- 회사 주소 -->
        <fieldset>
            <legend>회사 주소</legend>
            <div class="form-group">
                <input type="text" id="companyPostcode" name="companyPostcode" placeholder="우편번호" readonly>
                <button type="button" id="searchPostcodeBtn" onclick="searchPostcode()">우편번호 찾기</button>
            </div>
            <div class="form-group">
                <input type="text" id="companyAddress" name="companyAddress" placeholder="대표주소" readonly>
            </div>
            <div class="form-group">
                <input type="text" id="companyDAddress" name="companyDAddress" placeholder="상세 주소">
            </div>
        </fieldset>

        <!-- 회사 로고 -->
        <fieldset>
            <legend>회사 로고</legend>
            <div class="file-input-container">
                <div class="preview-container">
                    <img src="images/noimage.png" id="logoPreview" alt="로고 미리보기">
                </div>
                <button type="button" class="custom-file-button">파일 선택</button>
                <input type="file" id="companyLogo" name="companyLogo" accept="image/*" onchange="previewImage(event)">
            </div>
        </fieldset>

        <!-- 가입 버튼 -->
        <div class="form-group">
            <button type="submit" class="signup-button">가입하기</button>
        </div>
        <p class="terms">
            가입 시 <a href="/terms">이용 약관</a> 및 <a href="/privacy">개인정보 처리방침</a>에 동의하는 것으로 간주됩니다.
        </p>
    </form>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
    const fileButton = document.querySelector('.custom-file-button');
    const fileInput = document.getElementById('companyLogo');

    fileButton.addEventListener('click', () => {
        fileInput.click();
    });
});
    function searchPostcode() {
        new daum.Postcode({
            oncomplete: function (data) {
                let addr = data.userSelectedType === 'R' ? data.roadAddress : data.jibunAddress;
                document.getElementById('companyPostcode').value = data.zonecode;
                document.getElementById('companyAddress').value = addr;
                document.getElementById('companyDAddress').focus();
            }
        }).open();
    }

    function previewImage(event) {
        const input = event.target;
        const logoPreview = document.getElementById('logoPreview');
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = function () {
                logoPreview.src = reader.result;
            };
            reader.readAsDataURL(input.files[0]);
        } else {
            logoPreview.src = "images/noimage.png";
        }
    }
</script>
</body>
</html>
