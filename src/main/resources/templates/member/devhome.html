<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Dev Home</title>
  <script>
    function checkSession() {
      fetch('/session-status', { method: 'GET' })
        .then(response => {
          if (response.ok) {
            return response.json();
          } else {
            throw new Error("로그인 상태가 아닙니다.");
          }
        })
        .then(data => {
          document.getElementById('sessionStatus').innerText = `${data.memberName} 님 로그인 중입니다.`;
          document.getElementById('memberRole').innerText = `권한: ${data.memberRole}`;
        })
        .catch(() => {
          document.getElementById('sessionStatus').innerText = "로그인 정보가 없습니다.";
          document.getElementById('memberRole').innerText = "권한 정보를 확인할 수 없습니다.";
        });
    }

    window.onload = function() {
      checkSession();
    };

    function logout() {
      fetch('/logout', { method: 'POST' })
        .then(() => {
          window.location.href = '/';
        });
    }
  </script>
</head>
<body>
<h1>Dev Home</h1>
<p id="sessionStatus">세션 정보를 불러오는 중...</p>
<p id="memberRole">권한 정보를 불러오는 중...</p>

<a href = "/dev/companyList"> 회사 목록 보기 </a><br>
<a href = "/dev/board/eventList"> 이벤트 목록 보기 </a><br>
<a href = "/dev/board/notificationList"> 공지사항 목록 </a><br>
<a href = "/dev/board/qnaList"> Q&A </a><br><br>

<button onclick="logout()">로그아웃</button>
</body>
</html>